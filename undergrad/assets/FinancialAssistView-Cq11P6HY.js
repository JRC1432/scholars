import{_ as q,S as _,a3 as b,r as m,$ as v,o as i,d as B,w as a,e as r,a7 as E,M,l as s,a4 as p,O as U,c,a5 as f,g as A,a6 as D,a8 as F,a9 as k,a as N}from"./index-Lhrr584p.js";import{Q as d,a as O}from"./QTable-D0_fp5GO.js";import{Q as I}from"./QTr-BVK3Kbsf.js";import"./sweetalert2.all-Ced_kw8w.js";import"./QList-DakvS0LG.js";import"./QMarkupTable-DNJNZBGt.js";import"./QSelect-CbOoRKNU.js";import"./QMenu-kJOoyUX5.js";import"./selection-Dtef2Nxx.js";import"./QItemLabel-DH87CdX2.js";const L={__name:"FinancialTbl",setup(S){_("$user"),b(),b();const y=_("$axios"),u=m(""),g=m({rowsPerPage:10}),w=m([]),x=[{name:"yr_awarded",required:!0,label:"Year of Award",align:"left",field:"yr_awarded",sortable:!0},{name:"spas_id",required:!0,label:"SPAS ID",align:"left",field:"spas_id",sortable:!0},{name:"full_name",required:!0,label:"NAME",align:"left",field:"full_name",sortable:!0},{name:"sy",required:!0,label:"School Year",align:"left",field:"sy",sortable:!0},{name:"term",required:!0,label:"Term",align:"left",field:"term",sortable:!0}];v(()=>{C()});const C=()=>{y.get("/read.php?readEligible").then(function(t){w.value=t.data})},h=m([]),Q=async()=>{try{const t=await y.get("read.php?exportCSV");h.value=t.data}catch(t){console.error(t)}},V=t=>{if(t.length===0)return"";const l=[...new Set(t.flatMap(o=>Object.keys(o)))].join(","),e=t.map(o=>l.split(",").map(j=>{let n=o[j];return typeof n=="object"&&n!==null&&(n=JSON.stringify(n)),`"${n!==void 0?String(n).replace(/"/g,'""'):""}"`}).join(",")).join(`
`);return`${l}
${e}`},$=()=>{const t=V(h.value),l=new Blob([t],{type:"text/csv"}),e=URL.createObjectURL(l),o=document.createElement("a");o.href=e,o.download="data.csv",document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(e)};v(Q);const T=t=>{D.push({path:"/editgrades/"+t.row.spas_id})};return(t,l)=>(i(),B(O,{flat:"",bordered:"",rows:w.value,columns:x,"row-key":"name",filter:u.value,pagination:g.value,"onUpdate:pagination":l[1]||(l[1]=e=>g.value=e),class:"rounded-borders-20 no-border custom-table","model:pagination":"pagination"},{"top-right":a(()=>[r(E,{borderless:"",dense:"",debounce:"300",modelValue:u.value,"onUpdate:modelValue":l[0]||(l[0]=e=>u.value=e),placeholder:"Search"},{append:a(()=>[r(M,{name:"search"})]),_:1},8,["modelValue"])]),body:a(e=>[r(I,{prop:e,onClick:o=>T(e)},{default:a(()=>[r(d,{key:"spas_id",props:e},{default:a(()=>[s(p(e.row.yr_awarded),1)]),_:2},1032,["props"]),r(d,{key:"spas_id",props:e},{default:a(()=>[s(p(e.row.spas_id),1)]),_:2},1032,["props"]),r(d,{key:"full_name",props:e},{default:a(()=>[r(U,{class:"primary",label:e.value},{default:a(()=>[s(p(e.row.full_name),1)]),_:2},1032,["label"])]),_:2},1032,["props"]),r(d,{key:"sy",props:e},{default:a(()=>[s(p(e.row.sy),1)]),_:2},1032,["props"]),r(d,{key:"term",props:e},{default:a(()=>[e.row.term==1?(i(),c(f,{key:0},[s(" 1st Semester ")],64)):e.row.term==2?(i(),c(f,{key:1},[s(" 2nd Semester ")],64)):e.row.term==3?(i(),c(f,{key:2},[s(" Summer ")],64)):(i(),c(f,{key:3},[s(" Mid Year ")],64))]),_:2},1032,["props"])]),_:2},1032,["prop","onClick"])]),"top-left":a(()=>[r(A,{color:"primary","icon-right":"archive",label:"Export To CSV","no-caps":"",onClick:$})]),default:a(()=>[s(" // ")]),_:1},8,["rows","filter","pagination"]))}},R=q(L,[["__scopeId","data-v-c18b3884"]]),P={class:"q-pa-md"},Y=N("div",{class:"text-h6 text-primary"}," Scholars Eligible for Financial Assistance ",-1),te={__name:"FinancialAssistView",setup(S){return _("$user"),b(),b(),_("$axios"),(y,u)=>(i(),c("div",P,[r(F,{flat:"",bordered:"",class:"my-card rounded-borders-40"},{default:a(()=>[r(k,null,{default:a(()=>[Y]),_:1}),r(k,null,{default:a(()=>[r(R)]),_:1})]),_:1})]))}};export{te as default};
